<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Add New Task</title>
    <link rel="stylesheet" href="primer.scss" >
    <script src="d3.min.js" charset="utf8"></script>
    <style>
        body { background-color: #222222 }
        h1 { color: #eaf2f5 }
        td { width: 80px; }
        p  { color: #eaf2f5;}
    </style>
</head>
<script>
/*    d3.select("#albumButton").on("click", populateTables)

    function loadAlbums() {
        d3.json("http://localhost:8080/albums", function(err, res) {
            if (err) alert("Unable to load album data.")
            else renderAlbumTable(res)
        })
    }*/

</script>
<body>
<p>You'll be able to add a new task using this page soon.</p>
<button onclick="window.close" >Close Window</button>

<form id="myForm" action="http://localhost:8080/createTask" method="get" >
    <p>Title:
        <input type="text"
               name="description"
               size="15"
               maxlength="30"
               required="required">
    </p>
    <p>Description
        <textarea name="description"
                  cols="20"
                  rows="4">Enter here...</textarea>
    </p>
    <label for="dueDate" >Due date:</label>
    <input type="date" id="dueDate" />
    <br/>
    <input id="createTaskButton" type="submit" name="createTask" value="Create Task">
    <button id="saveTaskButton" >Save Task</button>
</form>

</body>
<script>

    d3.select("#saveTaskButton").on("click", saveTask)

    function saveTask() {
        var formData = JSON.stringify($("#myForm").serializeArray());

/*        var xhr = new XMLHttpRequest();
        xhr.open(form.method, form.action, true);
        xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
        xhr.send(formData);*/


        $.ajax({
            type: "POST",
            url: "http://localhost:8080/createTask",
            data: formData,
            success: successFunction,
            datatype: "json",
            contentType: "application/json"
        });
    }

</script>
</html>